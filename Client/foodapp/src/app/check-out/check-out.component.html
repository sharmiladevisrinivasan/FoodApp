<div class="container">
  <div class="py-5 text-center">
    <h2>Checkout</h2>
  </div>
  <div *ngIf="showPaymentGateway">
    <app-payme [price]="allTotal" (payResponse)="saveOrder($event)"></app-payme>
  </div>
  <div *ngIf="!showPaymentGateway">
  <div class="row" *ngIf="foodAddedToCart.length">
    <div class="col-md-4 order-md-2 mb-4">
      <h4 class="d-flex justify-content-between align-items-center mb-3">
        <span class="text-muted">Your cart</span>
        <span class="badge badge-secondary badge-pill">{{foodAddedToCart.length}}</span>
      </h4>
      <ul class="list-group mb-3">

        <li class="list-group-item d-flex justify-content-between lh-condensed" *ngFor="let food of getFoodFromCart()">
            <div>
              <h6 class="my-0">{{food.Quantity}}  x {{food.Name}}</h6>

            </div>
            <span class="text-muted">{{ (food.Price * food.Quantity) | currency}}</span>
          </li>
        <li class="list-group-item d-flex justify-content-between">
          <span>Total (USD)</span>
          <strong>{{ allTotal | currency}}</strong>
        </li>
      </ul>
    </div>

    <div class="col-md-8 order-md-1">
      <h4 class="mb-3">Billing address</h4>
      <form [formGroup]= "checkoutForm" (ngSubmit)="onSubmit()">
        <div class="row">
          <div class="col-md-6 mb-3">
             <div class="form-group">
          <label for="Name">Name</label>
          <input type="text" id="Name"  class="form-control" name="Name" formControlName="Name">
          <span
          *ngIf= "!checkoutForm.get('Name').valid && checkoutForm.get('Name').touched" class="help-block">
          Please enter your Name
        </span>
        </div>
        </div>
      </div>

        <div class="form-group">
          <label for="address1">Address</label>
          <input type="text" id="address1" formControlName="address1" class="form-control">
        <span
          *ngIf= "!checkoutForm.get('address1').valid && checkoutForm.get('address1').touched" class="help-block">
          Please enter your BillingAddress
        </span>
        </div>
        <div class="form-group">
          <label for="address2">Apartment or Suite<span class="text-muted"></span></label>
          <input type="text"  id="address2" formControlName="address2" class="form-control" placeholder="Apartment or Suite">
        </div>
        <div class="form-group">
          <label for="Country">Country</label>
            <select class="custom-select d-block w-100" id="Country" formControlName="Country" required="">
              <option value="">Choose...</option>
              <option>United States</option>
            </select>
        <span
          *ngIf= "!checkoutForm.get('Country').valid && checkoutForm.get('Country').touched" class="help-block">
          Please choose your Country
        </span>

        </div>
        <div class="form-group">
          <label for="State">State</label>
            <select class="custom-select d-block w-100" id="State" formControlName="State" required="">
              <option value="">Choose...</option>
              <option>Massachusetts</option>

              <option>Alabama</option>
              <option>Alaska</option>
              <option>Arizona</option>
               <option>Arkansas </option>
               <option>California</option>
               <option>Colorado</option>
               <option> Connecticut </option>
               <option> Delaware </option>
               <option> Florida </option>
               <option> Georgia</option>
               <option> Hawaii</option>
               <option> Idaho </option>
               <option> Illinois</option>
               <option> Indiana </option>
               <option> Iowa </option>
               <option> Kansas </option>
               <option> Kentucky</option>
               <option> Louisiana  </option>
               <option> Maine</option>
               <option> Maryland </option>
               <option> Michigan </option>
               <option> Minnesota</option>
               <option> Mississippi </option>
               <option> Missouri </option>
               <option> Montana</option>
               <option> Nebraska </option>
               <option> Nevada </option>
               <option>  New Hampshire </option>
               <option>  New Jersey</option>
               <option> New Mexico </option>
               <option> New York  </option>
               <option> North Carolina</option>
               <option> North Dakota  </option>
               <option> Ohio </option>
               <option> Oklahoma </option>
               <option> Oregon </option>
               <option>  Pennsylvania </option>
               <option> Rhode Island </option>
               <option> South Carolina </option>
               <option> South Dakota </option>
               <option> Tennesse </option>
               <option> Texas </option>
               <option> Utah </option>
               <option> Vermont </option>
               <option> Virginia </option>
               <option> Washington </option>
               <option> West Virginia </option>
               <option> Wisconsin </option>
               <option> Wyoming </option>
            </select>
        <span
          *ngIf= "!checkoutForm.get('State').valid && checkoutForm.get('State').touched" class="help-block">
          Please choose your State
        </span>
        </div>
        <div class="form-group">
          <label for="Zip"> Zip</label>
          <input type="number" minlength= "5" class="form-control" formControlName="Zip" id="Zip" placeholder="" required="">
        <span
          *ngIf= "!checkoutForm.get('Zip').valid && checkoutForm.get('Zip').touched" class="help-block">
          Please enter your Zipcode
        </span>
        </div>
        <div class="form-group">
          <label for="Phone">Phone</label>

          <input type="tel" id="Phone" name="Phone" class="form-control" formControlName="Phone" placeholder=""
                 pattern="[0-9]{10}"
                 required="">
                 <span
                 *ngIf= "!checkoutForm.get('Phone').valid && checkoutForm.get('Phone').touched" class="help-block">
                 Please enter your 10-digit Contact Number!!
               </span>
        </div>
        <span
          *ngIf= "!checkoutForm.valid && checkoutForm.touched" class="help-block">
          Please enter a valid data
        </span>
        <hr class="mb-4">
        <button type="submit" class="btn btn-primary btn-lg btn-block">Place Order</button>
        </form>
          </div>
</div>
  <ng-template #noItemsInCart>
      <h2 class="text-center">Your Cart is empty</h2>
    </ng-template>
  </div>
</div>
